!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=13)}([function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this._value=t}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.map=function(e){return e||(e=function(t){return t}),new t(e(this.value))},t.prototype.flatMap=function(e){for(var n,r=this.map(e);(null===(n=r)||void 0===n?void 0:n.value)instanceof t;)r=r.value;return r},t}();e.Monad=i;var u=function(t){function e(e){return t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value instanceof i?this._value.flatMap().value:this._value},enumerable:!0,configurable:!0}),e.fromNullable=function(t){return new e(t)},e.prototype.isAbsent=function(){return void 0===this.value||null==this.value},e.prototype.isPresent=function(t){var e=this.isAbsent();return!e&&t&&t.call(this,this),!e},e.prototype.ifPresentLazy=function(t){return void 0===t&&(t=function(){}),this.isPresent.call(this,t),this},e.prototype.orElse=function(t){return this.isPresent()?this:null==t?e.absent:this.flatMap((function(){return t}))},e.prototype.orElseLazy=function(t){return this.isPresent()?this:this.flatMap(t)},e.prototype.flatMap=function(n){var r=t.prototype.flatMap.call(this,n);return r instanceof e?r.flatMap():e.fromNullable(r.value)},e.prototype.getIf=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this,r=0;r<t.length;r++){var o=this.keyVal(t[r]),i=this.arrayIndex(t[r]);if(""===o&&i>=0){if((n=this.getClass().fromNullable(n.value instanceof Array?n.value.length<i?null:n.value[i]:null)).isAbsent())return n}else if(o&&i>=0){if(n.getIfPresent(o).isAbsent())return n;if((n=n.getIfPresent(o).value instanceof Array?this.getClass().fromNullable(n.getIfPresent(o).value[i]):this.getClass().absent).isAbsent())return n}else{if((n=n.getIfPresent(o)).isAbsent())return n;i>-1&&(n=this.getClass().fromNullable(n.value[i]))}}return n},e.prototype.match=function(t){return!this.isAbsent()&&t(this.value)},e.prototype.get=function(t){return void 0===t&&(t=e.absent),this.isAbsent()?this.getClass().fromNullable(t).flatMap():this.getClass().fromNullable(this.value).flatMap()},e.prototype.toJson=function(){return JSON.stringify(this.value)},e.prototype.getClass=function(){return e},e.prototype.arrayIndex=function(t){var e=t.indexOf("["),n=t.indexOf("]");return e>=0&&n>0&&e<n?parseInt(t.substring(e+1,n)):-1},e.prototype.keyVal=function(t){var e=t.indexOf("[");return e>=0?t.substring(0,e):t},e.prototype.getIfPresent=function(t){return this.isAbsent()?this.getClass().absent:this.getClass().fromNullable(this.value[t]).flatMap()},e.prototype.resolve=function(t){if(this.isAbsent())return e.absent;try{return e.fromNullable(t(this.value))}catch(t){return e.absent}},e.absent=e.fromNullable(null),e}(i);e.Optional=u;var a=function(t){function e(e,n){void 0===n&&(n="value");var r=t.call(this,e)||this;return r.key=n,r}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value?this._value[this.key]:null},set:function(t){this._value&&(this._value[this.key]=t)},enumerable:!0,configurable:!0}),e.prototype.orElse=function(t){var n={};return n[this.key]=t,this.isPresent()?this:new e(n,this.key)},e.prototype.orElseLazy=function(t){if(this.isPresent())return this;var n={};return n[this.key]=t(),new e(n,this.key)},e.prototype.getClass=function(){return e},e.fromNullable=function(t,n){return void 0===n&&(n="value"),new e(t,n)},e.absent=e.fromNullable(null),e}(u);e.ValueEmbedder=a},function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),u=n(4),a=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._limits=-1,this.pos=-1,this.value=t}return t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new(t.bind.apply(t,o([void 0],e)))},t.ofAssoc=function(t){return this.of.apply(this,o(Object.keys(t))).map((function(e){return[e,t[e]]}))},t.ofDataSource=function(e){for(var n=[];e.hasNext();)n.push(e.next());return new(t.bind.apply(t,o([void 0],n)))},t.prototype.limits=function(t){return this._limits=t,this},t.prototype.onElem=function(t){for(var e=0;e<this.value.length&&(-1==this._limits||e<this._limits)&&!1!==t(this.value[e],e);e++);return this},t.prototype.each=function(t){this.onElem(t)},t.prototype.map=function(e){e||(e=function(t){return t});var n=[];return this.each((function(t,r){n.push(e(t))})),new(t.bind.apply(t,o([void 0],n)))},t.prototype.flatMap=function(e){var n=[];return this.each((function(t){var r=e(t);n=Array.isArray(r)?n.concat(r):n.concat.apply(n,o(r.value))})),t.of.apply(t,o(n))},t.prototype.filter=function(e){var n=[];return this.each((function(t){e(t)&&n.push(t)})),new(t.bind.apply(t,o([void 0],n)))},t.prototype.reduce=function(t,e){void 0===e&&(e=null);for(var n=null!=e?0:1,r=null!=e?e:this.value.length?this.value[0]:null,o=n;o<this.value.length&&(-1==this._limits||o<this._limits);o++)r=t(r,this.value[o]);return i.Optional.fromNullable(r)},t.prototype.first=function(){return this.value&&this.value.length?i.Optional.fromNullable(this.value[0]):i.Optional.absent},t.prototype.last=function(){var t=this._limits>0?Math.min(this._limits,this.value.length):this.value.length;return i.Optional.fromNullable(t?this.value[t-1]:null)},t.prototype.anyMatch=function(t){for(var e=0;e<this.value.length&&(-1==this._limits||e<this._limits);e++)if(t(this.value[e]))return!0;return!1},t.prototype.allMatch=function(t){if(!this.value.length)return!1;for(var e=0,n=0;n<this.value.length;n++)t(this.value[n])&&e++;return e==this.value.length},t.prototype.noneMatch=function(t){for(var e=0,n=0;n<this.value.length;n++)t(this.value[n])||e++;return e==this.value.length},t.prototype.sort=function(e){var n=this.value.slice().sort(e);return t.of.apply(t,o(n))},t.prototype.collect=function(t){return this.each((function(e){return t.collect(e)})),t.finalValue},t.prototype.hasNext=function(){var t=-1!=this._limits&&this.pos>=this._limits-1,e=this.pos>=this.value.length-1;return!(t||e)},t.prototype.next=function(){return this.hasNext()?(this.pos++,this.value[this.pos]):null},t.prototype.reset=function(){this.pos=-1},t}();e.Stream=a;var s=function(){function t(t){this._limits=-1,this.pos=-1,this.dataSource=t}return t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new t(new(u.ArrayStreamDataSource.bind.apply(u.ArrayStreamDataSource,o([void 0],e))))},t.ofAssoc=function(t){return this.of.apply(this,o(Object.keys(t))).map((function(e){return[e,t[e]]}))},t.ofStreamDataSource=function(e){return new t(e)},t.prototype.hasNext=function(){return!this.isOverLimits()&&this.dataSource.hasNext()},t.prototype.next=function(){var t=this.dataSource.next();return this.pos++,t},t.prototype.reset=function(){this.dataSource.reset(),this.pos=0,this._limits=-1},t.prototype.nextFilter=function(t){if(this.hasNext()){var e=this.next();return t(e)?e:this.nextFilter(t)}return null},t.prototype.limits=function(t){return this._limits=t,this},t.prototype.collect=function(t){for(;this.hasNext();){var e=this.next();t.collect(e)}return t.finalValue},t.prototype.onElem=function(e){var n=this;return new t(new u.MappedStreamDataSource((function(t){return!1===e(t,n.pos)&&n.stop(),t}),this))},t.prototype.filter=function(e){return new t(new u.FilteredStreamDatasource(e,this))},t.prototype.map=function(e){return new t(new u.MappedStreamDataSource(e,this))},t.prototype.flatMap=function(e){return new t(new u.FlatMapStreamDataSource(e,this))},t.prototype.each=function(t){for(;this.hasNext();)!1===t(this.next())&&this.stop()},t.prototype.reduce=function(t,e){if(void 0===e&&(e=null),!this.hasNext())return i.Optional.absent;var n=null,r=null;if(null!=e)n=e,r=this.next();else{if(n=this.next(),!this.hasNext())return i.Optional.fromNullable(n);r=this.next()}for(n=t(n,r);this.hasNext();)n=t(n,r=this.next());return i.Optional.fromNullable(n)},t.prototype.last=function(){return this.hasNext()?this.reduce((function(t,e){return e})):i.Optional.absent},t.prototype.first=function(){return this.reset(),this.hasNext()?i.Optional.fromNullable(this.next()):i.Optional.absent},t.prototype.anyMatch=function(t){for(;this.hasNext();)if(t(this.next()))return!0;return!1},t.prototype.allMatch=function(t){for(;this.hasNext();)if(!t(this.next()))return!1;return!0},t.prototype.noneMatch=function(t){for(;this.hasNext();)if(t(this.next()))return!1;return!0},t.prototype.sort=function(e){var n=this.collect(new u.ArrayCollector);return n=n.sort(e),t.of.apply(t,o(n))},Object.defineProperty(t.prototype,"value",{get:function(){return this.collect(new u.ArrayCollector)},enumerable:!0,configurable:!0}),t.prototype.stop=function(){this.pos=this._limits+1e9},t.prototype.isOverLimits=function(){return-1!=this._limits&&this.pos>=this._limits-1},t}();e.LazyStream=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),o=n(5),i=n(0),u=function(){function t(t,e){this.rootData=t,this.key=e}return Object.defineProperty(t.prototype,"value",{get:function(){return this.rootData[this.key]},set:function(t){this.rootData[this.key]=t},enumerable:!0,configurable:!0}),t}();!function(t){function e(t){for(var e=/\s/,n=(t=t.replace(/^\s\s*/,"")).length;e.test(t.charAt(--n)););return t.slice(0,n+1)}function n(t){return!!arguments.length&&null!=t&&("string"==typeof t||t instanceof String)}t.saveResolve=function(t,e){void 0===e&&(e=null);try{var n=t();return i.Optional.fromNullable(null!=n?n:e)}catch(t){return i.Optional.absent}},t.saveResolveLazy=function(t,e){void 0===e&&(e=null);try{var n=t();return i.Optional.fromNullable(null!=n?n:e())}catch(t){return i.Optional.absent}},t.strToArray=function(t,n){void 0===n&&(n=/\./gi);var r=[];return t.split(n).forEach((function(t){r.push(e(t))})),r},t.trim=e,t.objToArray=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=[]),void 0===t||null==t?null!=n?n:null:t instanceof Array&&!e&&!n?t:n.concat(Array.prototype.slice.call(t,e))},t.equalsIgnoreCase=function(t,e){var n=null!=e?e:"___no_value__";return(null!=t?t:"___no_value__").toLowerCase()===n.toLowerCase()},t.timeout=function(t){var e=null;return new r.CancellablePromise((function(n,r){e=setTimeout((function(){n()}),t)}),(function(){e&&(clearTimeout(e),e=null)}))},t.interval=function(t){var e=null;return new r.CancellablePromise((function(n,r){e=setInterval((function(){n()}),t)}),(function(){e&&(clearInterval(e),e=null)}))},t.assertType=function(t,e){return n(e)?typeof t==e:t instanceof e},t.deepCopy=function(t){return JSON.parse(JSON.stringify(t))},t.val=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=t,i=null;return o(e.length,"at least one property must be set othweise it cannot work"),e.forEach((function(t){var e,n;r[t]=null!=(n=null===(e=r)||void 0===e?void 0:e[t])?n:{},i=new u(r,t),r=r[t]})),null!=i?i:new u(r,null)},t.isString=n,t.isFunc=function(t){return t instanceof Function||"function"==typeof t}}(e.Lang||(e.Lang={}))},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i,u=n(0);!function(t){t[t.PENDING=0]="PENDING",t[t.FULLFILLED=1]="FULLFILLED",t[t.REJECTED=2]="REJECTED"}(i=e.PromiseStatus||(e.PromiseStatus={}));var a=function(){function t(t){var e=this;this.status=i.PENDING,this.allFuncs=[],this.value=t,this.value((function(t){return e.resolve(t)}),(function(t){return e.reject(t)}))}return t.all=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r,o=0,i=new t((function(t,e){r=t})),u=function(){o++,e.length==o&&r()};u.__last__=!0;for(var a=0;a<e.length;a++)e[a].finally(u);return i},t.race=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r,o,i=new t((function(t,e){r=t,o=e})),u=function(){return r&&r(),r=null,o=null,null};u.__last__=!0;var a=function(){return o&&o(),o=null,r=null,null};a.__last__=!0;for(var s=0;s<e.length;s++)e[s].then(u),e[s].catch(a);return i},t.reject=function(e){return new t((function(n,r){e instanceof t?e.then((function(t){r(t)})):setTimeout((function(){r(e)}),1)}))},t.resolve=function(e){return new t((function(n,r){e instanceof t?e.then((function(t){return n(t)})):setTimeout((function(){n(e)}),1)}))},t.prototype.then=function(t,e){return this.allFuncs.push({then:t}),e&&this.allFuncs.push({catch:e}),this.spliceLastFuncs(),this},t.prototype.catch=function(t){return this.allFuncs.push({catch:t}),this.spliceLastFuncs(),this},t.prototype.finally=function(t){if(!this.__reason__)return this.allFuncs.push({finally:t}),this.spliceLastFuncs(),this;this.__reason__.finally(t)},t.prototype.resolve=function(e){for(;this.allFuncs.length&&this.allFuncs[0].then;){var n=this.allFuncs.shift(),r=u.Optional.fromNullable(n.then(e));if(!r.isPresent())break;if((e=(r=r.flatMap()).value)instanceof t)return void this.transferIntoNewPromise(e)}this.appyFinally(),this.status=i.FULLFILLED},t.prototype.reject=function(e){for(;this.allFuncs.length&&!this.allFuncs[0].finally;){var n=this.allFuncs.shift();if(n.catch){var r=u.Optional.fromNullable(n.catch(e));if(r.isPresent()){if((e=(r=r.flatMap()).value)instanceof t)return void this.transferIntoNewPromise(e);this.status=i.REJECTED;break}break}}this.status=i.REJECTED,this.appyFinally()},t.prototype.appyFinally=function(){for(;this.allFuncs.length;){var t=this.allFuncs.shift();t.finally&&t.finally()}},t.prototype.spliceLastFuncs=function(){for(var t=[],e=[],n=0;n<this.allFuncs.length;n++)for(var r in this.allFuncs[n])this.allFuncs[n][r].__last__?t.push(this.allFuncs[n]):e.push(this.allFuncs[n]);this.allFuncs=e.concat(t)},t.prototype.transferIntoNewPromise=function(t){for(var e=0;e<this.allFuncs.length;e++)for(var n in this.allFuncs[e])t[n](this.allFuncs[e][n])},t}();e.Promise=a;var s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.cancellator=function(){},r.cancellator=n,r}return o(e,t),e.prototype.cancel=function(){this.status=i.REJECTED,this.appyFinally(),this.allFuncs=[]},e.prototype.then=function(e,n){return t.prototype.then.call(this,e,n)},e.prototype.catch=function(e){return t.prototype.catch.call(this,e)},e.prototype.finally=function(e){return t.prototype.finally.call(this,e)},e}(a);e.CancellablePromise=s},function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),u=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.dataPos=-1,this.value=t}return t.prototype.hasNext=function(){return this.value.length-1>this.dataPos},t.prototype.next=function(){return this.dataPos++,this.value[this.dataPos]},t.prototype.reset=function(){this.dataPos=-1},t}();e.ArrayStreamDataSource=u;var a=function(){function t(t,e){this.filteredNext=null,this.filterFunc=t,this.inputDataSource=e}return t.prototype.hasNext=function(){for(;null==this.filteredNext&&this.inputDataSource.hasNext();){var t=this.inputDataSource.next();if(this.filterFunc(t))return this.filteredNext=t,!0;this.filteredNext=null}return null!=this.filteredNext},t.prototype.next=function(){var t=this.filteredNext;return this.filteredNext=null,this.hasNext(),t},t.prototype.reset=function(){this.filteredNext=null,this.inputDataSource.reset()},t}();e.FilteredStreamDatasource=a;var s=function(){function t(t,e){this.mapFunc=t,this.inputDataSource=e}return t.prototype.hasNext=function(){return this.inputDataSource.hasNext()},t.prototype.next=function(){return this.mapFunc(this.inputDataSource.next())},t.prototype.reset=function(){this.inputDataSource.reset()},t}();e.MappedStreamDataSource=s;var l=function(){function t(t,e){this.mapFunc=t,this.inputDataSource=e}return t.prototype.hasNext=function(){return this.resolveCurrentNext()||this.resolveNextNext()},t.prototype.resolveCurrentNext=function(){var t=!1;return this.activeDataSource&&(t=this.activeDataSource.hasNext()),t},t.prototype.resolveNextNext=function(){for(var t=!1;!t&&this.inputDataSource.hasNext();){var e=this.mapFunc(this.inputDataSource.next());Array.isArray(e)?this.activeDataSource=new(u.bind.apply(u,o([void 0],e))):this.activeDataSource=e,t=this.activeDataSource.hasNext()}return t},t.prototype.next=function(){return this.activeDataSource.next()},t.prototype.reset=function(){this.inputDataSource.reset()},t}();e.FlatMapStreamDataSource=l;var c=function(){function t(){this.data=[]}return t.prototype.collect=function(t){this.data.push(t)},Object.defineProperty(t.prototype,"finalValue",{get:function(){return this.data},enumerable:!0,configurable:!0}),t}();e.ArrayCollector=c;var f=function(){function t(){this.finalValue={}}return t.prototype.collect=function(t){var e,n;this.finalValue[(e=t[0],null!=e?e:t)]=null==(n=t[1])||n},t}();e.AssocArrayCollector=f;var p=function(){function t(){this.finalValue=new FormData}return t.prototype.collect=function(t){this.finalValue.append(t.key,t.value)},t}();e.FormDataCollector=p;var h=function(){function t(){this.finalValue=new FormData}return t.prototype.collect=function(t){var e=t.encodeFormElement();if(Object.keys(e)){var n=t.name.value;this.finalValue.append(n,e[n])}},t}();e.QueryFormDataCollector=h;var y=function(){function t(){this.formData=[]}return t.prototype.collect=function(t){var e=t.encodeFormElement();if(Object.keys(e).length){var n=t.name.value;this.formData.push([n,e[n]])}},Object.defineProperty(t.prototype,"finalValue",{get:function(){return i.Stream.of.apply(i.Stream,o(this.formData)).map((function(t){return t.join("=")})).reduce((function(t,e){return[t,e].join("&")})).orElse("").value},enumerable:!0,configurable:!0}),t}();e.QueryFormStringCollector=y},function(t,e,n){"use strict";(function(e){var r=n(7);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0}function i(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var u=n(8),a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function f(t){return!i(t)&&("function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var p=t.exports=g,h=/\s*function\s+([^\(\s]*)\s*/;function y(t){if(u.isFunction(t)){if(l)return t.name;var e=t.toString().match(h);return e&&e[1]}}function v(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function d(t){if(l||!u.isFunction(t))return u.inspect(t);var e=y(t);return"[Function"+(e?": "+e:"")+"]"}function m(t,e,n,r,o){throw new p.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:o})}function g(t,e){t||m(t,!0,e,"==",p.ok)}function b(t,e,n,r){if(t===e)return!0;if(i(t)&&i(e))return 0===o(t,e);if(u.isDate(t)&&u.isDate(e))return t.getTime()===e.getTime();if(u.isRegExp(t)&&u.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(f(t)&&f(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===o(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;var a=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==a&&a===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),function(t,e,n,r){if(null==t||null==e)return!1;if(u.isPrimitive(t)||u.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=w(t),i=w(e);if(o&&!i||!o&&i)return!1;if(o)return t=s.call(t),e=s.call(e),b(t,e,n);var a,l,c=O(t),f=O(e);if(c.length!==f.length)return!1;for(c.sort(),f.sort(),l=c.length-1;l>=0;l--)if(c[l]!==f[l])return!1;for(l=c.length-1;l>=0;l--)if(a=c[l],!b(t[a],e[a],n,r))return!1;return!0}(t,e,n,r))}return n?t===e:t==e}function w(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function E(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function x(t,e,n,r){var o;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!o&&m(o,n,"Missing expected exception"+r);var i="string"==typeof r,a=!t&&o&&!n;if((!t&&u.isError(o)&&i&&E(o,n)||a)&&m(o,n,"Got unwanted exception"+r),t&&o&&n&&!E(o,n)||!t&&o)throw o}p.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=v(d((e=this).actual),128)+" "+e.operator+" "+v(d(e.expected),128),this.generatedMessage=!0);var n=t.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var o=r.stack,i=y(n),u=o.indexOf("\n"+i);if(u>=0){var a=o.indexOf("\n",u+1);o=o.substring(a+1)}this.stack=o}}},u.inherits(p.AssertionError,Error),p.fail=m,p.ok=g,p.equal=function(t,e,n){t!=e&&m(t,e,n,"==",p.equal)},p.notEqual=function(t,e,n){t==e&&m(t,e,n,"!=",p.notEqual)},p.deepEqual=function(t,e,n){b(t,e,!1)||m(t,e,n,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(t,e,n){b(t,e,!0)||m(t,e,n,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(t,e,n){b(t,e,!1)&&m(t,e,n,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function t(e,n,r){b(e,n,!0)&&m(e,n,r,"notDeepStrictEqual",t)},p.strictEqual=function(t,e,n){t!==e&&m(t,e,n,"===",p.strictEqual)},p.notStrictEqual=function(t,e,n){t===e&&m(t,e,n,"!==",p.notStrictEqual)},p.throws=function(t,e,n){x(!0,t,e,n)},p.doesNotThrow=function(t,e,n){x(!1,t,e,n)},p.ifError=function(t){if(t)throw t},p.strict=r((function t(e,n){e||m(e,!0,n,"==",t)}),p,{equal:p.strictEqual,deepEqual:p.deepStrictEqual,notEqual:p.notStrictEqual,notDeepEqual:p.notDeepStrictEqual}),p.strict.strict=p.strict;var O=Object.keys||function(t){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e}}).call(this,n(6))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function u(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,s=u(t),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))o.call(n,c)&&(s[c]=n[c]);if(r){a=r(n);for(var f=0;f<a.length;f++)i.call(n,a[f])&&(s[a[f]]=n[a[f]])}}return s}},function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},o=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,u=String(t).replace(o,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),s=r[n];n<i;s=r[++n])v(s)||!w(s)?u+=" "+s:u+=" "+a(s);return u},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,u={};function a(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(n)?r.showHidden=n:n&&e._extend(r,n),g(r.showHidden)&&(r.showHidden=!1),g(r.depth)&&(r.depth=2),g(r.colors)&&(r.colors=!1),g(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),c(r,t,r.depth)}function s(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function l(t,e){return t}function c(t,n,r){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return m(o)||(o=c(t,o,r)),o}var i=function(t,e){if(g(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(d(e))return t.stylize(""+e,"number");if(y(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(t,n);if(i)return i;var u=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(u);if(t.showHidden&&(u=Object.getOwnPropertyNames(n)),x(n)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return f(n);if(0===u.length){if(O(n)){var s=n.name?": "+n.name:"";return t.stylize("[Function"+s+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return f(n)}var l,w="",_=!1,S=["{","}"];(h(n)&&(_=!0,S=["[","]"]),O(n))&&(w=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(w=" "+RegExp.prototype.toString.call(n)),E(n)&&(w=" "+Date.prototype.toUTCString.call(n)),x(n)&&(w=" "+f(n)),0!==u.length||_&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=_?function(t,e,n,r,o){for(var i=[],u=0,a=e.length;u<a;++u)A(e,String(u))?i.push(p(t,e,n,r,String(u),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(p(t,e,n,r,o,!0))})),i}(t,n,r,a,u):u.map((function(e){return p(t,n,r,a,e,_)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(l,w,S)):S[0]+w+S[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,o,i){var u,a,s;if((s=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=s.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):s.set&&(a=t.stylize("[Setter]","special")),A(r,o)||(u="["+o+"]"),a||(t.seen.indexOf(s.value)<0?(a=v(n)?c(t,s.value,null):c(t,s.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),g(u)){if(i&&o.match(/^\d+$/))return a;(u=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=t.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=t.stylize(u,"string"))}return u+": "+a}function h(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function v(t){return null===t}function d(t){return"number"==typeof t}function m(t){return"string"==typeof t}function g(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===_(t)}function w(t){return"object"==typeof t&&null!==t}function E(t){return w(t)&&"[object Date]"===_(t)}function x(t){return w(t)&&("[object Error]"===_(t)||t instanceof Error)}function O(t){return"function"==typeof t}function _(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(g(i)&&(i=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!u[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=t.pid;u[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else u[n]=function(){};return u[n]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=y,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=d,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=g,e.isRegExp=b,e.isObject=w,e.isDate=E,e.isError=x,e.isFunction=O,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(10);var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),N[t.getMonth()],e].join(" ")}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",j(),e.format.apply(e,arguments))},e.inherits=n(11),e._extend=function(t,e){if(!e||!w(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function L(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(P&&t[P]){var e;if("function"!=typeof(e=t[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,P,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,o)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),P&&Object.defineProperty(e,P,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=P,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,u=function(){return o.apply(i,arguments)};e.apply(this,n).then((function(e){t.nextTick(u,null,e)}),(function(e){t.nextTick(L,e,u)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(9))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var s,l=[],c=!1,f=-1;function p(){c&&s&&(c=!1,s.length?l=s.concat(l):f=-1,l.length&&h())}function h(){if(!c){var t=a(p);c=!0;for(var e=l.length;e;){for(s=l,l=[];++f<e;)s&&s[f].run();f=-1,e=l.length}s=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new y(t,e)),1!==l.length||c||a(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),u=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return u},u=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),l=n(1),c=n(2),f=c.Lang.trim,p=c.Lang.objToArray,h=c.Lang.isString,y=c.Lang.equalsIgnoreCase,v=c.Lang.deepCopy,d=c.Lang.val,m=function(t){function e(e,n,r){void 0===r&&(r=null);var o=t.call(this,e,n)||this;return o.element=e,o.name=n,o.defaultVal=r,o}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){var t,e=(t=this.element.get(0)).orElse.apply(t,u([])).values;return e.length?e[0].getAttribute(this.name):this.defaultVal},set:function(t){for(var e,n=(e=this.element.get(0)).orElse.apply(e,u([])).values,r=0;r<n.length;r++)n[r].setAttribute(this.name,t);n[0].setAttribute(this.name,t)},enumerable:!0,configurable:!0}),e.prototype.getClass=function(){return e},e.fromNullable=function(t,n){return void 0===n&&(n="value"),new e(t,n)},e}(s.ValueEmbedder);e.ElementAttribute=m;var g=function(t){return-1==t.indexOf("ln=scripts")&&-1==t.indexOf("ln=javax.faces")||-1==t.indexOf("/jsf.js")&&-1==t.indexOf("/jsf-uncompressed.js")},b=function(){function t(){for(var e,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(this.rootNode=[],this.pos=-1,this._limits=-1,!s.Optional.fromNullable(r).isAbsent()&&r.length)for(var i=0;i<r.length;i++)if(h(r[i])){var a=t.querySelectorAll(r[i]);a.isAbsent()||r.push.apply(r,u(a.values))}else if(r[i]instanceof t)(e=this.rootNode).push.apply(e,u(r[i].values));else if(h(r[i])){var l=t.querySelectorAll(r[i]);(n=this.rootNode).push.apply(n,u(l.values))}else this.rootNode.push(r[i])}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getAsElem(0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this.allElems()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return new s.ValueEmbedder(this.getAsElem(0).value,"id")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.rootNode.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.getAsElem(0).getIf("tagName")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodeName",{get:function(){return this.getAsElem(0).getIf("nodeName")},enumerable:!0,configurable:!0}),t.prototype.isTag=function(t){return!this.isAbsent()&&(this.nodeName.orElse("__none___").value.toLowerCase()==t.toLowerCase()||this.tagName.orElse("__none___").value.toLowerCase()==t.toLowerCase())},Object.defineProperty(t.prototype,"type",{get:function(){return this.getAsElem(0).getIf("type")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return new s.ValueEmbedder(this.getAsElem(0).value,"name")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputValue",{get:function(){return this.getAsElem(0).getIf("value").isPresent()?new s.ValueEmbedder(this.getAsElem(0).value):s.ValueEmbedder.absent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return l.Stream.of.apply(l.Stream,u(this.values)).allMatch((function(t){return!!t.checked}))},set:function(t){this.eachElem((function(e){return e.checked=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){var t=this;return this.stream.flatMap((function(t){var e=t.value.value;return new l.Stream(e.elements?p(e.elements):[])})).filter((function(t){return!!t})).collect(new w).orElseLazy((function(){return t.querySelectorAll("input, select, textarea, fieldset")}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.attr("disabled").isPresent()},set:function(t){t?this.attr("disabled").value="disabled":this.removeAttribute("disabled")},enumerable:!0,configurable:!0}),t.prototype.removeAttribute=function(t){this.eachElem((function(e){return e.removeAttribute(t)}))},Object.defineProperty(t.prototype,"childNodes",{get:function(){var e=[];return this.eachElem((function(t){e=e.concat(p(t.childNodes))})),new(t.bind.apply(t,u([void 0],e)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stream",{get:function(){return new(l.Stream.bind.apply(l.Stream,u([void 0],this.asArray)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lazyStream",{get:function(){return l.LazyStream.ofStreamDataSource(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asArray",{get:function(){var t=[];return this.each((function(e){t.push(e)})),t},enumerable:!0,configurable:!0}),t.querySelectorAll=function(e){return new t(document).querySelectorAll(e)},t.byId=function(e){return h(e)?new t(document).byId(e):new t(e)},t.byTagName=function(e){return h(e)?new t(document).byTagName(e):new t(e)},t.globalEval=function(e,n){return new t(document).globalEval(e,n)},t.fromMarkup=function(e){var n=c.Lang.saveResolve((function(){return new DOMParser})).value;if(n)return new t(n.parseFromString(e,"text/html"));var r=document.implementation.createHTMLDocument(""),o=(e=f(e)).toLowerCase();return o.includes("<!doctype")||o.includes("<html")||o.includes("<head")||o.includes("<body")?(r.documentElement.innerHTML=e,new t(r.documentElement)):(r.body.innerHTML=e,new(t.bind.apply(t,u([void 0],p(r.body.childNodes)))))},t.prototype.get=function(e){return e<this.rootNode.length?new t(this.rootNode[e]):t.absent},t.prototype.getAsElem=function(t,e){return void 0===e&&(e=s.Optional.absent),t<this.rootNode.length?s.Optional.fromNullable(this.rootNode[t]):e},t.prototype.allElems=function(){return this.rootNode},t.prototype.isAbsent=function(){return 0==this.length},t.prototype.isPresent=function(t){var e=this.isAbsent();return!e&&t&&t.call(this,this),!e},t.prototype.ifPresentLazy=function(t){return void 0===t&&(t=function(){}),this.isPresent.call(this,t),this},t.prototype.delete=function(){this.eachElem((function(t){t.parentNode&&t.parentNode.removeChild(t)}))},t.prototype.querySelectorAll=function(e){if(0==this.rootNode.length)return this;for(var n=[],r=0;r<this.rootNode.length;r++)if(this.rootNode[r].querySelectorAll){var o=this.rootNode[r].querySelectorAll(e);n=n.concat(p(o))}return new(t.bind.apply(t,u([void 0],n)))},t.prototype.byId=function(e,n){for(var r=[],o=0;n&&o<this.rootNode.length;o++)this.rootNode[o].id==e&&r.push(new t(this.rootNode[o]));return r=r.concat(this.querySelectorAll('[id="'+e+'"]')),new(t.bind.apply(t,u([void 0],r)))},t.prototype.byTagName=function(e,n){for(var r=[],o=0;n&&o<this.rootNode.length;o++)this.rootNode[o].tagName==e&&r.push(new t(this.rootNode[o]));return r=r.concat(this.querySelectorAll(e)),new(t.bind.apply(t,u([void 0],r)))},t.prototype.attr=function(t,e){return void 0===e&&(e=null),new m(this,t,e)},t.prototype.hasClass=function(t){var e=!1;return this.each((function(n){var r=n.attr("class").value||"";if(-1!=r.toLowerCase().indexOf(t.toLowerCase())){for(var o=r.split(/\s+/gi),i=!1,u=0;u<o.length&&!i;u++)i=o[u].toLowerCase()==t.toLowerCase();return!(e=e||i)&&void 0}})),e},t.prototype.addClass=function(t){var e=this;return this.each((function(n){var r=n.attr("class").value||"";e.hasClass(t)||(n.attr("class").value=f(r+" "+t))})),this},t.prototype.removeClass=function(t){var e=this;return this.each((function(n){if(e.hasClass(t)){for(var r=[],o=(n.attr("class").value||"").split(/\s+/gi),i=0;i<o.length;i++)o[i].toLowerCase()!=t.toLowerCase()&&r.push(o[i]);n.attr("class").value=r.join(" ")}})),this},t.prototype.isMultipartCandidate=function(){return this.querySelectorAll("input[type='file']").firstElem().isPresent()},t.prototype.html=function(t){return s.Optional.fromNullable(t).isAbsent()?this.isPresent()?s.Optional.fromNullable(this.innerHtml):s.Optional.absent:(this.innerHtml=t,this)},Object.defineProperty(t.prototype,"innerHtml",{get:function(){var t=[];return this.eachElem((function(e){return t.push(e.innerHTML)})),t.join("")},set:function(t){this.eachElem((function(e){return e.innerHTML=t}))},enumerable:!0,configurable:!0}),t.prototype._mozMatchesSelector=function(t,e){var n=t;return(n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector||function(e){for(var n=(document||window.ownerDocument).querySelectorAll(e),r=n.length;--r>=0&&n.item(r)!==t;);return r>-1}).call(t,e)},t.prototype.filterSelector=function(e){var n=this,r=[];return this.eachElem((function(t){n._mozMatchesSelector(t,e)&&r.push(t)})),new(t.bind.apply(t,u([void 0],r)))},t.prototype.matchesSelector=function(t){var e=this;return this.eachElem((function(n){if(!e._mozMatchesSelector(n,t))return!1})),!0},t.prototype.getIf=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this.childNodes,r=0;r<t.length;r++)if((n=n.filterSelector(t[r])).isAbsent())return n;return n},t.prototype.eachElem=function(t){for(var e=0,n=this.rootNode.length;e<n&&!1!==t(this.rootNode[e],e);e++);return this},t.prototype.firstElem=function(t){return void 0===t&&(t=function(t){return t}),this.rootNode.length>1&&t(this.rootNode[0],0),this},t.prototype.each=function(t){for(var e=0,n=this.rootNode.length;e<n&&!1!==t(this.get(e),e);e++);return this},t.prototype.first=function(t){return void 0===t&&(t=function(t){return t}),this.rootNode.length>=1?(t(this.get(0),0),this.get(0)):this},t.prototype.filter=function(e){var n=[];return this.each((function(t){e(t)&&n.push(t)})),new(t.bind.apply(t,u([void 0],n)))},t.prototype.globalEval=function(t,e){var n=document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");e&&r.setAttribute("nonce",e),r.type="text/javascript",r.innerHTML=t;var o=n.appendChild(r);return n.removeChild(o),this},t.prototype.detach=function(){return this.eachElem((function(t){t.parentNode.removeChild(t)})),this},t.prototype.appendTo=function(t){this.eachElem((function(e){t.getAsElem(0).orElseLazy((function(){return{appendChild:function(t){}}})).value.appendChild(e)}))},t.prototype.loadScriptEval=function(t,e,n){var r=this;void 0===e&&(e=0),void 0===n&&(n="utf-8");var o=new XMLHttpRequest;return o.open("GET",t,!1),n&&o.setRequestHeader("Content-Type","application/x-javascript; charset:"+n),o.send(null),o.onload=function(n){e?setTimeout((function(){r.globalEval(o.responseText+"\r\n//@ sourceURL="+t)}),e):r.globalEval(o.responseText.replace("\n","\r\n")+"\r\n//@ sourceURL="+t)},o.onerror=function(t){throw Error(t)},this},t.prototype.insertAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.each((function(t){for(var n=t.getAsElem(0).value,r=n.parentNode,o=function(t){var o=n.nextSibling;e[t].eachElem((function(t){o?(r.insertBefore(t,o),n=o):r.appendChild(t)}))},i=0;i<e.length;i++)o(i)}));var r=[];return r.push(this),r.concat(e),new(t.bind.apply(t,u([void 0],r)))},t.prototype.insertBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.each((function(t){for(var n=t.getAsElem(0).value,r=n.parentNode,o=0;o<e.length;o++)e[o].eachElem((function(t){r.insertBefore(t,n)}))}));var r=[];return r.push(this),r.concat(e),new(t.bind.apply(t,u([void 0],r)))},t.prototype.orElse=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.isPresent()?this:new(t.bind.apply(t,u([void 0],e)))},t.prototype.orElseLazy=function(e){return this.isPresent()?this:new t(e())},t.prototype.parents=function(e){var n=new Set,r=[],o=e.toLowerCase(),i=function(t){(t.tagName||"").toLowerCase()!=o||n.has(t)||(n.add(t),r.push(t))};return this.eachElem((function(t){for(;t.parentNode;)if(t=t.parentNode,i(t),"form"==e&&r.length)return!1})),new(t.bind.apply(t,u([void 0],r)))},t.prototype.copyAttrs=function(t){var e=this;return t.eachElem((function(t){var n,r,o=p(t.attributes);try{for(var i=a(o),u=i.next();!u.done;u=i.next()){var s=u.value,l=s.value,c=s.name;switch(c){case"id":e.id.value=l;break;case"disabled":e.resolveAttributeHolder("disabled").disabled=l;break;case"checked":e.resolveAttributeHolder("checked").checked=l;break;default:e.attr(c).value=l}}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}})),this},t.prototype.resolveAttributeHolder=function(t){void 0===t&&(t="value");var e=[];return e[t]=null,t in this.getAsElem(0).value?this.getAsElem(0).value:e},t.prototype.outerHTML=function(e,n,r){var o,i=t.fromMarkup(e),a=[],s=this.getAsElem(0).value,l=i.get(0),c=s.parentNode,f=l.getAsElem(0).value;c.replaceChild(f,s),a.push(new t(f));for(var p=[],h=1;h<i.length;h++)p.push(i.get(h)),this.rootNode.push(i.get(h).getAsElem(0).value);return a.push((o=t.byId(f)).insertAfter.apply(o,u(p))),n&&this.runScripts(),r&&this.runCss(),new(t.bind.apply(t,u([void 0],a)))},t.prototype.runScripts=function(t){var e=this;void 0===t&&(t=g);var n=[],r=y,o=function(o){var i=o.tagName,u=o.type||"";if(i&&r(i,"script")&&(""===u||r(u,"text/javascript")||r(u,"javascript")||r(u,"text/ecmascript")||r(u,"ecmascript"))){var a=o.getAttribute("src");if(void 0!==a&&null!=a&&a.length>0)t(a)&&(n.length&&(e.globalEval(n.join("\n")),n=[]),e.loadScriptEval(a,0,"UTF-8"));else{for(var s=f(o.text||o.innerText||o.innerHTML),l=!0;l;)l=!1,"\x3c!--"==s.substring(0,4)&&(s=s.substring(4),l=!0),"//\x3c!--"==s.substring(0,4)&&(s=s.substring(6),l=!0),"//<![CDATA["==s.substring(0,11)&&(s=s.substring(11),l=!0);n.push(s)}}};try{var i=this.querySelectorAll("script");if(null==i)return;for(var u=0;u<i.length;u++)o(i.getAsElem(u).value);n.length&&this.globalEval(n.join("\n"))}catch(t){window.console&&window.console.error&&console.error(t.message||t.description)}finally{o=null}return this},t.prototype.runCss=function(){var t=function(t,e){var n,r,o,i,u,a=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(a);var s=null!=(n=a.sheet)?n:a.styleSheet;a.setAttribute("rel",null!=(r=t.getAttribute("rel"))?r:"stylesheet"),a.setAttribute("type",null!=(o=t.getAttribute("type"))?o:"text/css"),null!=(u=null===(i=s)||void 0===i?void 0:i.cssText)&&u?s.cssText=e:a.appendChild(document.createTextNode(e))},e=function(e){var n=e.tagName;if(n&&y(n,"link")&&y(e.getAttribute("type"),"text/css"))t(e,"@import url('"+e.getAttribute("href")+"');");else if(n&&y(n,"style")&&y(e.getAttribute("type"),"text/css")){var r=[],o=e.childNodes;if(o)for(var i=o.length,u=0;u<i;u++)r.push(o[u].innerHTML||o[u].data);else e.innerHTML&&r.push(e.innerHTML);t(e,r.join(""))}},n=this.querySelectorAll("link, style");if(null!=n){for(var r=0;r<n.length;r++){e(n.getAsElem(r).value)}return this}},t.prototype.click=function(){return this.fireEvent("click"),this},t.prototype.addEventListener=function(t,e,n){return this.eachElem((function(r){r.addEventListener(t,e,n)})),this},t.prototype.removeEventListener=function(t,e,n){return this.eachElem((function(r){r.removeEventListener(t,e,n)})),this},t.prototype.fireEvent=function(t){this.eachElem((function(e){var n;if(e.ownerDocument)n=e.ownerDocument;else{if(9!=e.nodeType)throw new Error("Invalid node passed to fireEvent: "+e.id);n=e}if(e.dispatchEvent){var r="";switch(t){case"click":case"mousedown":case"mouseup":r="MouseEvents";break;case"focus":case"change":case"blur":case"select":r="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+t+"'."}var o=n.createEvent(r);o.initEvent(t,!0,!0),o.synthetic=!0,e.dispatchEvent(o)}else if(e.fireEvent){var i=n.createEventObject();i.synthetic=!0,e.fireEvent("on"+t,i)}}))},t.prototype.textContent=function(t){return void 0===t&&(t=""),this.stream.map((function(t){return t.getAsElem(0).orElseLazy((function(){return{textContent:""}})).value.textContent||""})).reduce((function(e,n){return e+t+n}),"").value},t.prototype.innerText=function(t){return void 0===t&&(t=""),this.stream.map((function(t){return t.getAsElem(0).orElseLazy((function(){return{innerText:""}})).value.innerText||""})).reduce((function(e,n){return[e,n].join(t)}),"").value},t.prototype.encodeFormElement=function(t){var e,n,r,o,i;if(!this.name.isAbsent()){var u=!!(null===(n=null===(e=t)||void 0===e?void 0:e.prototype)||void 0===n?void 0:n.deepCopy),a=v(null!=(o=null===(r=t)||void 0===r?void 0:r.value)?o:{value:{}});return this.each((function(t){if(!t.name.isAbsent()){var e=t.name.value,n=t.tagName.orElse("__none__").value.toLowerCase(),r=t.type.orElse("__none__").value.toLowerCase();if(r=r.toLowerCase(),("input"==n||"textarea"==n||"select"==n)&&null!=e&&""!=e&&!t.disabled){if("select"==n){var o=t.getAsElem(0).value;if(o.selectedIndex>=0)for(var i=o.options.length,u=0;u<i;u++)if(o.options[u].selected){var s=o.options[u];d(a,e).value=null!=s.getAttribute("value")?s.value:s.text}}if("select"!=n&&"button"!=r&&"reset"!=r&&"submit"!=r&&"image"!=r&&("checkbox"!=r&&"radio"!=r||t.checked)){var l=t.value.files;l&&l.length?d(a,e).value=l[0]:d(a,e).value=t.inputValue.value}}}})),u?null===(i=new t)||void 0===i?void 0:i.constructor(a):a}},Object.defineProperty(t.prototype,"cDATAAsString",{get:function(){return this.stream.flatMap((function(t){return t.childNodes.stream})).reduce((function(t,e){var n,r,o,i;return t.push(null!=(i=null===(o=null===(r=null===(n=e)||void 0===n?void 0:n.value)||void 0===r?void 0:r.value)||void 0===o?void 0:o.data)?i:""),t}),[]).value.join("")},enumerable:!0,configurable:!0}),t.prototype.subNodes=function(e,n){return s.Optional.fromNullable(n).isAbsent()&&(n=this.length),new(t.bind.apply(t,u([void 0],this.rootNode.slice(e,Math.min(n,this.length)))))},t.prototype.limits=function(t){return this._limits=t,this},t.prototype.hasNext=function(){var t=-1!=this._limits&&this.pos>=this._limits-1,e=this.pos>=this.values.length-1;return!(t||e)},t.prototype.next=function(){return this.hasNext()?(this.pos++,new t(this.values[this.pos])):null},t.prototype.reset=function(){this.pos=-1},t.absent=new t,t}();e.DomQuery=b;var w=function(){function t(){this.data=[]}return t.prototype.collect=function(t){this.data.push(t)},Object.defineProperty(t.prototype,"finalValue",{get:function(){return new(b.bind.apply(b,u([void 0],this.data)))},enumerable:!0,configurable:!0}),t}();e.DomQueryCollector=w,e.DQ=b},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),u=n(12),a=i.Lang.isString,s=function(t){function e(e,n){void 0===n&&(n="text/xml");var r;return a(e)?t.call(this,null==(r=e)?null:i.Lang.saveResolveLazy((function(){return new window.DOMParser}),(function(){return(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,{parseFromString:function(e,n){return t.loadXML(e)}};var t})).value.parseFromString(r,n))||this:t.call(this,e)||this}return o(e,t),e.prototype.isXMLParserError=function(){return this.querySelectorAll("parsererror").isPresent()},e.prototype.toString=function(){var t=[];return this.eachElem((function(e){void 0!==window.XMLSerializer?t.push((new window.XMLSerializer).serializeToString(e)):void 0!==e.xml&&t.push(e.xml)})),t.join("")},e.prototype.parserErrorText=function(t){return this.querySelectorAll("parsererror").textContent(t)},e.parseXML=function(t){return new e(t)},e.parseHTML=function(t){return new e(t,"text/html")},e.fromString=function(t,n){return void 0===n&&(n="text/xml"),new e(t,n)},e}(u.DomQuery);e.XMLQuery=s,e.XQ=s}]));
//# sourceMappingURL=XmlQuery.js.map