!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var l=t();for(var r in l)("object"==typeof exports?exports:e)[r]=l[r]}}(window,(function(){return function(e){var t={};function l(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,l),s.l=!0,s.exports}return l.m=e,l.c=t,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(r,s,function(t){return e[t]}.bind(null,s));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}([function(e,t,l){"use strict";l.r(t),l.d(t,"Monad",(function(){return r})),l.d(t,"Stream",(function(){return s})),l.d(t,"Optional",(function(){return n})),l.d(t,"Config",(function(){return u}));class r{constructor(e){this._value=e}map(e){e||(e=e=>e);let t=e(this.value);return new r(t)}flatMap(e){let t=this.map(e);for(;void 0!==t&&null!=t&&t.value instanceof r;)t=t.value;return t}get value(){return this._value}}class s{constructor(...e){this.value=e}static of(...e){return new s(...e)}each(e){for(let t=0;t<this.value.length&&!1!==e(this.value[t],t);t++);return this}map(e){e||(e=e=>e);let t=[];return this.each((l,r)=>{t.push(e(l))}),new s(...t)}flatMap(e){let t=this.map(e),l=this.mapStreams(t);return new s(...l)}filter(e){let t=[];return this.each(l=>{e(l)&&t.push(l)}),new s(...t)}reduce(e,t=null){let l=null!=t?0:1,r=null!=t?t:this.value.length?this.value[0]:null;for(let t=l;t<this.value.length;t++)r=e(r,this.value[t]);return n.fromNullable(r)}first(){return this.value&&this.value.length?n.fromNullable(this.value[0]):n.absent}last(){return n.fromNullable(this.value.length?this.value[this.value.length-1]:null)}anyMatch(e){for(let t=0;t<this.value.length;t++)if(e(this.value[t]))return!0;return!1}allMatch(e){if(!this.value.length)return!1;let t=0;for(let l=0;l<this.value.length;l++)e(this.value[l])&&t++;return t==this.value.length}noneMatch(e){let t=0;for(let l=0;l<this.value.length;l++)e(this.value[l])&&t++;return t==this.value.length}mapStreams(e){let t=[];return e.each(e=>{e instanceof s?t=t.concat(this.mapStreams(e)):t.push(e)}),t}}class n extends r{constructor(e){super(e)}static fromNullable(e){return new n(e)}isAbsent(){return void 0===this.value||null==this.value}isPresent(){return!this.isAbsent()}orElse(e){return this.isPresent()?this:null==e?n.absent:this.flatMap(()=>e)}orElseLazy(e){return this.isPresent()?this:this.flatMap(e)}flatMap(e){let t=super.flatMap(e);return t instanceof n?t.flatMap():n.fromNullable(t.value)}getIfPresent(e){return this.isAbsent()?this.getClass().absent:this.getClass().fromNullable(this.value[e]).flatMap()}getIf(...e){let t=this;for(let l=0;l<e.length;l++){let r=this.keyVal(e[l]),s=this.arrayIndex(e[l]);if(""===r&&s>=0){if((t=this.getClass().fromNullable(t.value instanceof Array?t.value.length<s?null:t.value[s]:null)).isAbsent())return t}else if(r&&s>=0){if(t.getIfPresent(r).isAbsent())return t;if((t=t.getIfPresent(r).value instanceof Array?this.getClass().fromNullable(t.getIfPresent(r).value[s]):this.getClass().absent).isAbsent())return t}else{if((t=t.getIfPresent(r)).isAbsent())return t;s>-1&&(t=this.getClass().fromNullable(t.value[s]))}}return t}get value(){return this._value instanceof r?this._value.flatMap().value:this._value}match(e){return!this.isAbsent()&&e(this.value)}get(e=n.absent){return this.isAbsent()?this.getClass().fromNullable(e).flatMap():this.getClass().fromNullable(this.value).flatMap()}getClass(){return n}toJson(){return JSON.stringify(this.value)}arrayIndex(e){let t=e.indexOf("["),l=e.indexOf("]");return t>=0&&l>0&&t<l?parseInt(e.substring(t+1,l)):-1}keyVal(e){let t=e.indexOf("[");return t>=0?e.substring(0,t):e}}n.absent=n.fromNullable(null);class a{constructor(e,t,l){this.rootElem=e,this.key=t,this.arrPos=void 0!==l?l:-1}get value(){return""==this.key&&this.arrPos>=0?this.rootElem[this.arrPos]:this.key&&this.arrPos>=0?this.rootElem[this.key][this.arrPos]:this.rootElem[this.key]}set value(e){""==this.key&&this.arrPos>=0?this.rootElem[this.arrPos]=e:this.key&&this.arrPos>=0?this.rootElem[this.key][this.arrPos]=e:this.rootElem[this.key]=e}}class u extends n{constructor(e){super(e)}static fromNullable(e){return new u(e)}apply(...e){if(e.length<1)return;this.buildPath(e);let t=this.keyVal(e[e.length-1]),l=this.arrayIndex(e[e.length-1]);return new a(1==e.length?this.value:this.getIf.apply(this,e.slice(0,e.length-1)).value,t,l)}applyIf(e,...t){return e?this.apply(t):{value:null}}getIf(...e){return this.getClass().fromNullable(super.getIf.apply(this,e).value)}get(e){return this.getClass().fromNullable(super.get(e).value)}delete(e){return e in this.value&&delete this.value[e],this}toJson(){return JSON.stringify(this.value)}get shallowCopy(){return new u(function(e,t=!0){let l={};return this.arrForEach(e,e=>{this.mixMaps(l,e,t)}),l}([{},this.value||{}]))}getClass(){return u}setVal(e){this._value=e}buildPath(e){let t=this,l=this.getClass().fromNullable(null),r=-1,s=function(e,t){if(e.length<t)for(let l=e.length;l<t;l++)e.push({})};for(let n=0;n<e.length;n++){let a=this.keyVal(e[n]),u=this.arrayIndex(e[n]);if(""===a&&u>=0){t.setVal(t.value instanceof Array?t.value:[]),s(t.value,u+1),r>=0&&(l.value[r]=t.value),l=t,r=u,t=this.getClass().fromNullable(t.value[u]);continue}let i=t.getIf(a);if(-1==u)i.isAbsent()?i=this.getClass().fromNullable(t.value[a]={}):t=i;else{let e=i.value instanceof Array?i.value:[];s(e,u+1),t.value[a]=e,i=this.getClass().fromNullable(e[u])}l=t,r=u,t=i}return this}}}])}));